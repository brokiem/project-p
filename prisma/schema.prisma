generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  uuid          String     @id @db.VarChar(36)
  username      String     @db.VarChar(64)
  email         String     @db.VarChar(320)
  password_hash String     @db.Text
  permissions   Int
  articles      articles[]
}

model articles {
  id          Int          @id @default(autoincrement())
  image_url   String       @db.Text
  title       String       @db.VarChar(535)
  content     String       @db.Text
  author_uuid String       @db.VarChar(36)
  created_at  DateTime     @default(now()) @db.DateTime()
  updated_at  DateTime?    @db.DateTime()
  type        article_type
  users       users        @relation(fields: [author_uuid], references: [uuid], onUpdate: Restrict, map: "articles_ibfk_1")

  @@index([author_uuid], map: "user_uuid")
}

enum article_type {
  NEWS
  ANNOUNCEMENT
}
